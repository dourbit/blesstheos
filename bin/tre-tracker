#!/usr/bin/env bash

. $(dirname $0)/tre-functions

function t-tracker {
  if [[ $1 == "not" ]]; then
    NOT=true
    shift 1
  fi
  while IFS= read -r ID; do
    TRACKER=`tre -t "$ID" --info-trackers | grep "Tracker 0: "`
    if [[ $NOT == true ]]; then
      [[ ! "$TRACKER" =~ .*${1}.* ]] && echo "$ID"
    else
      [[ "$TRACKER" =~ .*${1}.* ]] && echo "$ID"
    fi
  done
}

tre-ids-pipe t-tracker ${@}
