#!/usr/bin/env bash

# list exported functions
# show the code when name of function is given as $1

# https://www.computerhope.com/unix/bash/declare.htm
# `export -f` is same as `declare -fx` (at least for bash)

if [ $# -eq 0 ]; then
  count=0
  while read LINE; do
    echo $(echo $LINE | awk '{print $NF}')
    count=$(($count + 1))
  done < <(declare -Fx)
  echo "="
  echo "$count exported functions above"
  echo "($(basename $0) name # for code)"
else
  declare -fp "$1" 2> /dev/null || {
    echo "$1 is not a function"
    shopt -s expand_aliases
    ALIASES="$DOTS_HOME/use/aliases.sh"
    [ -f "$ALIASES" ] && . "$ALIASES"
    type "$1" 2> /dev/null
  }
fi
