#!/usr/bin/env bash

# Run a function with sudo, as declared / exported by the current user.

COMMAND_FN=sudo-fn
sudo-fn() {
  if [ $# -eq 0 ]; then
    echo "Usage: sudo-fn <function> [args]"
  else
    sudo bash -c "$(declare -f $1); $1 ${@:2}"
  fi
}

[ $(basename $0) = $COMMAND_FN ] && $COMMAND_FN "$@"
